!function(e,o){var t=o(),n="function"==typeof define&&define.amd,m="undefined"!=typeof module&&module.exports;n?define(t):m?module.exports=t:(this.jQuery||this.ender||this.$||this)[e]=t}("comment",function(){var e=this;return e.commentBoxOffset=jQuery("#comments").offset().top-70,e.respondForm=jQuery(".comment-list"),e.comments=jQuery(".depth-1"),e.numberShows=10,e.stepShow=5,e.numberComments=e.comments.length,e.init=function(o,t){e.numberShows=o,e.stepShow=t,e.lastShow=e.comments.length-e.numberShows,e.hideComment(),e.addShowMoreBtn()},e.hideComment=function(o){for(var t=e.numberShows;t<e.numberComments;t++)jQuery(e.comments[t]).hide()},e.hideCommentSlow=function(){for(var o=e.numberShows;o<e.numberComments;o++)jQuery(e.comments[o]).toggle("slow")},e.addShowMoreBtn=function(){e.respondForm.append(jQuery("<button/>").attr("class","toggle-comments").attr("href","#").html("Показать больше"))},e.showMore=function(o){for(var t=e.numberShows+o,n=e.numberShows;t>n;e.lastShow--,n++)jQuery(e.comments[n]).toggle("slow");return t},e.showComment=function(o,t){if(!(e.numberComments>10))return!1;e.init(o,t);var n=jQuery(".toggle-comments");n.html();jQuery(".toggle-comments").on("click",function(t){t.preventDefault(),e.lastShow<=20&&0!=e.lastShow?(e.numberShows=e.showMore(e.lastShow),n.text("Скрыть комментарии")):e.lastShow>20?e.numberShows=e.showMore(e.stepShow):(e.numberShows=o,e.lastShow=e.numberComments-e.numberShows,e.hideCommentSlow(),n.text("Показать больше"),jQuery("html, body").animate({scrollTop:e.commentBoxOffset},"slow"))})},{showComment:e.showComment}});
